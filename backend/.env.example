# =============================================================================
# Shiojiri Rainbow Seeker Backend - Environment Variables
# =============================================================================
# Copy this file to .env and fill in the appropriate values.
# Never commit .env to version control!
# =============================================================================

# =============================================================================
# Docker Configuration
# =============================================================================
# Docker Compose project name (optional, defaults to directory name)
# COMPOSE_PROJECT_NAME=shiojiri-rainbow-seeker

# PostgreSQL settings for Docker
POSTGRES_USER=shiojiri
POSTGRES_PASSWORD=shiojiri_dev_password
POSTGRES_PORT=5432

# API port mapping
API_PORT=3000

# Docker registry and image tag (for production)
# DOCKER_REGISTRY=your-registry.example.com/
# IMAGE_TAG=latest

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL database URL (alternative to individual settings)
# DATABASE_URL=postgres://username:password@localhost:5432/shiojiri_rainbow_development

# Database host (for Docker Compose)
# DATABASE_HOST=db
# DATABASE_PORT=5432

# Production database password
# SHIOJIRI_RAINBOW_SEEKER_DATABASE_PASSWORD=your-secure-password

# Database connection wait attempts (Docker startup)
DATABASE_WAIT_ATTEMPTS=30

# Skip database preparation on container startup
# SKIP_DATABASE_PREPARE=false

# =============================================================================
# Rails Configuration
# =============================================================================
# Rails environment (development, test, production)
# RAILS_ENV=development

# Rails master key (REQUIRED in production)
# Copy from config/master.key or generate with: rails credentials:edit
# RAILS_MASTER_KEY=your-master-key

# Secret key base (REQUIRED in production if not using credentials)
# Generate with: rails secret
# SECRET_KEY_BASE=your-secret-key-base

# Log to stdout (recommended for Docker)
RAILS_LOG_TO_STDOUT=true

# Serve static files (disable if using nginx/CDN)
# RAILS_SERVE_STATIC_FILES=false

# =============================================================================
# Performance Tuning
# =============================================================================
# Maximum threads per Puma worker
RAILS_MAX_THREADS=5

# Number of Puma worker processes
# Recommended: 1-2 per CPU core for API mode
WEB_CONCURRENCY=2

# Memory allocator optimization
MALLOC_ARENA_MAX=2

# =============================================================================
# JWT / Devise Authentication
# =============================================================================
# Secret key for JWT token signing (REQUIRED)
# Generate with: rails secret
DEVISE_JWT_SECRET_KEY=your-secure-jwt-secret-key-here

# Email address for Devise mailers
DEVISE_MAILER_SENDER=noreply@shiojiri-rainbow.example.com

# =============================================================================
# CORS Configuration
# =============================================================================
# Comma-separated list of allowed origins for CORS (production only)
# Example: https://shiojiri-rainbow.com,https://api.shiojiri-rainbow.com
ALLOWED_ORIGINS=

# =============================================================================
# Active Storage / Image Upload (AWS S3)
# =============================================================================
# Storage service: local, amazon (S3), google (GCS), microsoft (Azure)
# ACTIVE_STORAGE_SERVICE=local

# AWS S3 Configuration (required for production)
# Create IAM user with S3 permissions and generate access keys
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key

# AWS Region (default: ap-northeast-1 for Tokyo)
AWS_REGION=ap-northeast-1

# S3 Bucket name for storing photos
AWS_S3_BUCKET=shiojiri-rainbow-seeker-production

# CloudFront CDN hostname (optional, for faster image delivery)
# Example: d1234567890.cloudfront.net
AWS_CLOUDFRONT_HOST=

# =============================================================================
# External APIs
# =============================================================================
# Weather API key for rainbow prediction
# WEATHER_API_KEY=

# Firebase Cloud Messaging server key for push notifications
# FCM_SERVER_KEY=

# =============================================================================
# Solid Queue Configuration
# =============================================================================
# Run Solid Queue supervisor inside Puma (for single-server deployments)
# Set to true for development, false for production with separate worker
SOLID_QUEUE_IN_PUMA=true

# =============================================================================
# Redis Configuration (Optional)
# =============================================================================
# Only needed if using Redis instead of Solid variants
# REDIS_URL=redis://localhost:6379/0
# REDIS_PORT=6379
